<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°æ•ç½‘é¡µ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }
        
        /* ç¬¬ä¸€çœ¼çœ‹åˆ°çš„é†’ç›®æ–‡å­— */
        .first-sight {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
            text-align: center;
            padding: 25px 20px;
            font-size: 2.2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: fadeIn 0.8s ease-out;
        }
        
        /* é¼ æ ‡æ‚¬åœæ•ˆæœ */
        .first-sight:hover {
            background: linear-gradient(135deg, #ff5252, #26a69a);
            transform: scale(1.02);
            transition: all 0.3s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* è°ƒæ•´ä¸»å†…å®¹ä½ç½®ï¼Œä¸ºé¡¶éƒ¨æ–‡å­—ç•™ç©ºé—´ */
        .main-content {
            margin-top: 100px;
        }
        
        header, footer {
            background-color: #f4f4f4;
            padding: 20px;
            text-align: center;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        main {
            padding: 20px 0;
        }
        
        /* å¯çˆ±çš„è£…é¥° */
        .cat-icon {
            display: inline-block;
            margin: 0 10px;
            font-size: 1.5em;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* é—ªçƒæ–‡å­—æ•ˆæœ */
        .blinking-text {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50%, 100% {
                opacity: 1;
                color: #3498db;
            }
            25%, 75% {
                opacity: 0.3;
                color: #e74c3c;
            }
        }
    </style>
</head>
<body>
    <!-- ç¬¬ä¸€çœ¼çœ‹åˆ°çš„é†’ç›®æ–‡å­— -->
    <div class="first-sight">
        <span class="cat-icon">ğŸ±</span>
        åˆæƒ³å·çœ‹æˆ‘çš„ç½‘ç«™ï¼Œä½ ä¸ªå°é¦‹çŒ«ï¼
        <span class="cat-icon">ğŸ¾</span>
    </div>
    
    <div class="main-content">
        <header>
            <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™</h1>
            <p>è¿™æ˜¯ä¸€ä¸ªæ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®çš„ç½‘é¡µ</p>
        </header>
        
        <main>
            <h2>å°æ¸¸æˆæ—¶é—´ ğŸ®</h2>
            <div style="text-align: center; margin: 20px 0;">
                <div style="display: inline-block; background: #2c3e50; padding: 10px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
                    <canvas id="gameCanvas" width="300" height="300" style="border: 2px solid #3498db; background: #2ecc71; display: block;"></canvas>
                    <div style="margin-top: 10px; color: white; font-size: 0.9em;">
                        <p>ä½¿ç”¨æ–¹å‘é”®æˆ–ä¸‹æ–¹æŒ‰é’®æ§åˆ¶è´ªåƒè›‡ï¼Œåƒåˆ°çº¢è‰²é£Ÿç‰©åŠ åˆ†ï¼</p>
                        <p>åˆ†æ•°: <span id="score">0</span></p>
                        <div style="margin: 10px 0;">
                            <button id="startBtn" onclick="startGame()" style="margin: 5px; padding: 8px 20px; background: #2ecc71; color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: bold;">å¼€å§‹æ¸¸æˆ</button>
                            <button onclick="resetGame()" style="margin: 5px; padding: 8px 20px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">é‡æ–°å¼€å§‹</button>
                        </div>
                        <div style="margin-top: 10px;">
                            <div style="margin-bottom: 5px;">
                                <button onclick="changeDirection('up')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em;">â†‘</button>
                            </div>
                            <div>
                                <button onclick="changeDirection('left')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em; margin-right: 5px;">â†</button>
                                <button onclick="changeDirection('down')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em; margin-right: 5px;">â†“</button>
                                <button onclick="changeDirection('right')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em;">â†’</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <script>
                // è´ªåƒè›‡æ¸¸æˆ
                const canvas = document.getElementById('gameCanvas');
                const ctx = canvas.getContext('2d');
                const scoreElement = document.getElementById('score');
                
                let score = 0;
                let gameSpeed = 150;
                let gameRunning = false;
                
                // è›‡çš„åˆå§‹ä½ç½®å’Œæ–¹å‘
                let snake = [
                    { x: 150, y: 150 },
                    { x: 140, y: 150 },
                    { x: 130, y: 150 }
                ];
                let direction = 'right';
                let nextDirection = 'right';
                
                // é£Ÿç‰©ä½ç½®
                let food = { x: 0, y: 0 };
                
                // ç”Ÿæˆé£Ÿç‰©
                function generateFood() {
                    food.x = Math.floor(Math.random() * (canvas.width / 10)) * 10;
                    food.y = Math.floor(Math.random() * (canvas.height / 10)) * 10;
                    
                    // ç¡®ä¿é£Ÿç‰©ä¸åœ¨è›‡èº«ä¸Š
                    for (let segment of snake) {
                        if (segment.x === food.x && segment.y === food.y) {
                            generateFood();
                            return;
                        }
                    }
                }
                
                // ç»˜åˆ¶è›‡
                function drawSnake() {
                    ctx.fillStyle = '#34495e';
                    for (let segment of snake) {
                        ctx.fillRect(segment.x, segment.y, 10, 10);
                        ctx.strokeStyle = '#2c3e50';
                        ctx.strokeRect(segment.x, segment.y, 10, 10);
                    }
                }
                
                // ç»˜åˆ¶é£Ÿç‰©
                function drawFood() {
                    ctx.fillStyle = '#e74c3c';
                    ctx.fillRect(food.x, food.y, 10, 10);
                }
                
                // æ›´æ–°è›‡çš„ä½ç½®
                function updateSnake() {
                    const head = { x: snake[0].x, y: snake[0].y };
                    
                    // æ”¹å˜æ–¹å‘
                    direction = nextDirection;
                    
                    // ç§»åŠ¨å¤´éƒ¨
                    if (direction === 'up') head.y -= 10;
                    if (direction === 'down') head.y += 10;
                    if (direction === 'left') head.x -= 10;
                    if (direction === 'right') head.x += 10;
                    
                    // æ£€æŸ¥è¾¹ç•Œç¢°æ’
                    if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
                        gameRunning = false;
                        startBtn.disabled = false;
                        startBtn.textContent = 'å¼€å§‹æ¸¸æˆ';
                        alert('æ¸¸æˆç»“æŸï¼ä½ çš„åˆ†æ•°æ˜¯: ' + score);
                        return;
                    }
                    
                    // æ£€æŸ¥è‡ªèº«ç¢°æ’
                    for (let i = 1; i < snake.length; i++) {
                        if (head.x === snake[i].x && head.y === snake[i].y) {
                            gameRunning = false;
                            startBtn.disabled = false;
                            startBtn.textContent = 'å¼€å§‹æ¸¸æˆ';
                            alert('æ¸¸æˆç»“æŸï¼ä½ çš„åˆ†æ•°æ˜¯: ' + score);
                            return;
                        }
                    }
                    
                    // æ·»åŠ æ–°å¤´éƒ¨
                    snake.unshift(head);
                    
                    // æ£€æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
                    if (head.x === food.x && head.y === food.y) {
                        score++;
                        scoreElement.textContent = score;
                        generateFood();
                        // åŠ å¿«æ¸¸æˆé€Ÿåº¦
                        if (gameSpeed > 50) {
                            gameSpeed -= 5;
                        }
                    } else {
                        // ç§»é™¤å°¾éƒ¨
                        snake.pop();
                    }
                }
                
                // ç»˜åˆ¶æ¸¸æˆ
                function draw() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    drawSnake();
                    drawFood();
                }
                
                // æ¸¸æˆä¸»å¾ªç¯
                function gameLoop() {
                    if (gameRunning) {
                        updateSnake();
                        draw();
                        setTimeout(gameLoop, gameSpeed);
                    }
                }
                
                // å¼€å§‹æ¸¸æˆ
                function startGame() {
                    if (!gameRunning) {
                        gameRunning = true;
                        startBtn.disabled = true;
                        startBtn.textContent = 'æ¸¸æˆä¸­...';
                        gameLoop();
                    }
                }
                
                // é‡ç½®æ¸¸æˆ
                function resetGame() {
                    score = 0;
                    gameSpeed = 150;
                    gameRunning = false;
                    scoreElement.textContent = score;
                    startBtn.disabled = false;
                    startBtn.textContent = 'å¼€å§‹æ¸¸æˆ';
                    
                    snake = [
                        { x: 150, y: 150 },
                        { x: 140, y: 150 },
                        { x: 130, y: 150 }
                    ];
                    direction = 'right';
                    nextDirection = 'right';
                    
                    generateFood();
                    draw();
                }
                
                // æ”¹å˜æ–¹å‘
                function changeDirection(newDirection) {
                    if ((newDirection === 'up' && direction !== 'down') ||
                        (newDirection === 'down' && direction !== 'up') ||
                        (newDirection === 'left' && direction !== 'right') ||
                        (newDirection === 'right' && direction !== 'left')) {
                        nextDirection = newDirection;
                    }
                }
                
                // é”®ç›˜æ§åˆ¶
                document.addEventListener('keydown', (e) => {
                    if (gameRunning) {
                        if (e.key === 'ArrowUp' && direction !== 'down') {
                            nextDirection = 'up';
                        } else if (e.key === 'ArrowDown' && direction !== 'up') {
                            nextDirection = 'down';
                        } else if (e.key === 'ArrowLeft' && direction !== 'right') {
                            nextDirection = 'left';
                        } else if (e.key === 'ArrowRight' && direction !== 'left') {
                            nextDirection = 'right';
                        }
                    }
                });
                
                // åˆå§‹åŒ–æ¸¸æˆ
                generateFood();
                draw();
            </script>
            
            <!-- æ‘¸é‡‘æ¸¸æˆ -->
            <h2>æ‘¸é‡‘æ¸¸æˆ ğŸ­</h2>
            <div style="text-align: center; margin: 20px 0;">
                <div style="display: inline-block; background: #1a1a2e; padding: 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); color: white;">
                    <!-- æ¸¸æˆä¿¡æ¯ -->
                    <div style="margin-bottom: 10px; display: flex; justify-content: space-around; align-items: center;">
                        <div>
                            <p>ğŸ¤”ï¸ ç”Ÿå‘½å€¼: <span id="playerHp">100</span>/100</p>
                            <div style="width: 100px; height: 10px; background: #333; border-radius: 5px; overflow: hidden;">
                                <div id="playerHpBar" style="width: 100%; height: 100%; background: #2ecc71; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                        <div>
                            <p>ğŸŒ™ æ€ªç‰©ç”Ÿå‘½å€¼: <span id="enemyHp">0</span>/20</p>
                            <div style="width: 100px; height: 10px; background: #333; border-radius: 5px; overflow: hidden;">
                                <div id="enemyHpBar" style="width: 0%; height: 100%; background: #e74c3c; transition: width 0.3s ease;"></div>
                            </div>
                        </div>
                        <div>
                            <p>å½“å‰é‡‘é¢: <span id="gold">0</span> ğŸŒ¹</p>
                            <p>ç›®æ ‡é‡‘é¢: <span id="targetGold">1000</span> ğŸŒ¹</p>
                        </div>
                    </div>
                    
                    <!-- æ¸¸æˆç½‘æ ¼ -->
                    <div id="gameGrid" style="font-family: monospace; font-size: 1.2em; line-height: 1.2; background: #0f3460; padding: 10px; border-radius: 5px; margin: 10px 0;"></div>
                    
                    <!-- éš¾åº¦é€‰æ‹© -->
                    <div style="margin: 10px 0;">
                        <p>é€‰æ‹©éš¾åº¦:</p>
                        <button onclick="selectDifficulty('easy')" style="margin: 5px; padding: 5px 15px; background: #2ecc71; color: white; border: none; border-radius: 3px; cursor: pointer;">ç®€å•</button>
                        <button onclick="selectDifficulty('medium')" style="margin: 5px; padding: 5px 15px; background: #f39c12; color: white; border: none; border-radius: 3px; cursor: pointer;">ä¸­ç­‰</button>
                        <button onclick="selectDifficulty('hard')" style="margin: 5px; padding: 5px 15px; background: #e67e22; color: white; border: none; border-radius: 3px; cursor: pointer;">å›°éš¾</button>
                        <button onclick="selectDifficulty('devil')" style="margin: 5px; padding: 5px 15px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">é­”é¬¼</button>
                    </div>
                    
                    <!-- æ§åˆ¶æŒ‰é’® -->
                    <div style="margin: 15px 0;">
                        <!-- æ–¹å‘æ§åˆ¶ -->
                        <div style="margin-bottom: 10px;">
                            <div style="margin-bottom: 5px;">
                                <button onclick="move('up')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em;">â†‘</button>
                            </div>
                            <div>
                                <button onclick="move('left')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em; margin-right: 5px;">â†</button>
                                <button onclick="move('down')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em; margin-right: 5px;">â†“</button>
                                <button onclick="move('right')" style="width: 40px; height: 30px; background: #3498db; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 1.2em;">â†’</button>
                            </div>
                        </div>
                        
                        <!-- åŠŸèƒ½æŒ‰é’® -->
                        <div>
                            <button id="startBtn2" onclick="startGame2()" style="margin: 5px; padding: 8px 20px; background: #2ecc71; color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: bold;">å¼€å§‹æ¸¸æˆ</button>
                            <button onclick="attack()" style="margin: 5px; padding: 8px 20px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer;">æ”»å‡»</button>
                            <button onclick="dig()" style="margin: 5px; padding: 8px 20px; background: #f39c12; color: white; border: none; border-radius: 3px; cursor: pointer;">æŒ–æ˜</button>
                            <button onclick="pickup()" style="margin: 5px; padding: 8px 20px; background: #9b59b6; color: white; border: none; border-radius: 3px; cursor: pointer;">æ‹¾å–</button>
                            <button id="escapeBtn" onclick="escapeGame()" style="margin: 5px; padding: 8px 20px; background: #e74c3c; color: white; border: none; border-radius: 3px; cursor: pointer; opacity: 0.5; pointer-events: none;">æ’¤ç¦»</button>
                            <button onclick="resetGame2()" style="margin: 5px; padding: 8px 20px; background: #95a5a6; color: white; border: none; border-radius: 3px; cursor: pointer;">é‡æ–°å¼€å§‹</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <script>
                // æ‘¸é‡‘æ¸¸æˆ
                const gameGrid = document.getElementById('gameGrid');
                const playerHpElement = document.getElementById('playerHp');
                const playerHpBar = document.getElementById('playerHpBar');
                const enemyHpElement = document.getElementById('enemyHp');
                const enemyHpBar = document.getElementById('enemyHpBar');
                const goldElement = document.getElementById('gold');
                const targetGoldElement = document.getElementById('targetGold');
                const escapeBtn = document.getElementById('escapeBtn');
                
                // æ¸¸æˆå‚æ•°
                let gridSize = 25;
                let grid = [];
                let player = { x: 0, y: 0 };
                let enemy = null;
                let gold = 0;
                let targetGold = 1000;
                let playerHp = 100;
                let enemyHp = 0;
                let gameRunning2 = false;
                let difficulty = 'easy';
                let refreshTimer = null;
                let enemyAttackTimer = null;
                let enemyMoveTimer = null;
                let attackCooldown = false; // æ”»å‡»å†·å´
                
                // åˆå§‹åŒ–æ¸¸æˆç½‘æ ¼
                function initGrid() {
                    grid = [];
                    for (let y = 0; y < gridSize; y++) {
                        let row = [];
                        for (let x = 0; x < gridSize; x++) {
                            // éšæœºç”Ÿæˆå¢™ä½“ï¼ˆ40%æ¦‚ç‡ï¼‰
                            row.push(Math.random() < 0.4 ? 'ã€‚' : Math.floor(Math.random() * 9) + 1);
                        }
                        grid.push(row);
                    }
                    
                    // æ”¾ç½®ç©å®¶åœ¨éšæœºä½ç½®ï¼ˆéå¢™ä½“ï¼‰
                    do {
                        player.x = Math.floor(Math.random() * gridSize);
                        player.y = Math.floor(Math.random() * gridSize);
                    } while (grid[player.y][player.x] === 'ã€‚');
                    
                    drawGrid();
                }
                
                // ç»˜åˆ¶æ¸¸æˆç½‘æ ¼
                function drawGrid() {
                    let output = '';
                    for (let y = 0; y < gridSize; y++) {
                        for (let x = 0; x < gridSize; x++) {
                            if (x === player.x && y === player.y) {
                                output += 'ğŸ¤”ï¸';
                            } else if (enemy && x === enemy.x && y === enemy.y) {
                                output += 'ğŸŒ™';
                            } else {
                                output += grid[y][x];
                            }
                            output += ' ';
                        }
                        output += '\n';
                    }
                    gameGrid.innerHTML = output;
                }
                
                // é€‰æ‹©éš¾åº¦
                function selectDifficulty(level) {
                    difficulty = level;
                    switch(level) {
                        case 'easy':
                            targetGold = 1000;
                            break;
                        case 'medium':
                            targetGold = 5000;
                            break;
                        case 'hard':
                            targetGold = 100000;
                            break;
                        case 'devil':
                            targetGold = 500000;
                            break;
                    }
                    targetGoldElement.textContent = targetGold;
                    updateEscapeBtn();
                }
                
                // å¼€å§‹æ¸¸æˆ
                function startGame2() {
                    if (!gameRunning2) {
                        gameRunning2 = true;
                        gold = 0;
                        playerHp = 100;
                        enemy = null;
                        enemyHp = 0;
                        
                        updateStats();
                        initGrid();
                        
                        // å¼€å§‹åˆ·æ–°è®¡æ—¶å™¨
                        refreshTimer = setInterval(refreshNumbers, 10000);
                    }
                }
                
                // é‡ç½®æ¸¸æˆ
                function resetGame2() {
                    gameRunning2 = false;
                    gold = 0;
                    playerHp = 100;
                    enemy = null;
                    enemyHp = 0;
                    
                    clearInterval(refreshTimer);
                    clearInterval(enemyAttackTimer);
                    clearInterval(enemyMoveTimer);
                    
                    updateStats();
                    initGrid();
                    updateEscapeBtn();
                }
                
                // ç§»åŠ¨ç©å®¶
                function move(direction) {
                    if (!gameRunning2) return;
                    
                    let newX = player.x;
                    let newY = player.y;
                    
                    switch(direction) {
                        case 'up': newY--; break;
                        case 'down': newY++; break;
                        case 'left': newX--; break;
                        case 'right': newX++; break;
                    }
                    
                    // æ£€æŸ¥è¾¹ç•Œå’Œå¢™ä½“
                    if (newX >= 0 && newX < gridSize && newY >= 0 && newY < gridSize && grid[newY][newX] !== 'ã€‚') {
                        player.x = newX;
                        player.y = newY;
                        drawGrid();
                    }
                }
                
                // æ”»å‡»
                function attack() {
                    if (!gameRunning2 || attackCooldown) return;
                    
                    // æ”»å‡»å†·å´ï¼Œ2ç§’
                    attackCooldown = true;
                    setTimeout(() => {
                        attackCooldown = false;
                    }, 2000);
                    
                    // æ£€æŸ¥å½“å‰ä½ç½®
                    const currentCell = grid[player.y][player.x];
                    
                    if (currentCell === 'ã€‚') {
                        // æ”»å‡»å¢™ä½“ï¼Œå˜æˆæ•°å­—
                        grid[player.y][player.x] = Math.floor(Math.random() * 9) + 1;
                    } else if (enemy && player.x === enemy.x && player.y === enemy.y) {
                        // æ”»å‡»æ•Œäºº
                        enemy.hp -= 20;
                        enemyHp = enemy.hp;
                        
                        if (enemy.hp <= 0) {
                            // æ•Œäººæ­»äº¡
                            enemy = null;
                            enemyHp = 0;
                            clearInterval(enemyAttackTimer);
                            clearInterval(enemyMoveTimer);
                            
                            // æ•Œäººæ­»äº¡åï¼Œè¯¥ä½ç½®å˜ä¸º"ğŸˆšï¸"
                            grid[player.y][player.x] = 'ğŸˆšï¸';
                        }
                    }
                    
                    updateStats();
                    drawGrid();
                }
                
                // æŒ–æ˜
                function dig() {
                    if (!gameRunning2) return;
                    
                    // æ£€æŸ¥å½“å‰ä½ç½®
                    const currentCell = grid[player.y][player.x];
                    
                    if (typeof currentCell === 'number' || !isNaN(parseInt(currentCell))) {
                        // å¦‚æœæ˜¯æ•°å­—ï¼Œéšæœºç”Ÿæˆç‰©èµ„
                        const random = Math.random();
                        if (random < 0.333) {
                            // ç”ŸæˆğŸŒ¹
                            grid[player.y][player.x] = 'ğŸŒ¹';
                        } else if (random < 0.666) {
                            // ç”ŸæˆğŸŒ™æ€ª
                            if (!enemy) {
                                enemy = { x: player.x, y: player.y, hp: 20 };
                                enemyHp = 20;
                                
                                // å¼€å§‹æ•Œäººç§»åŠ¨å’Œæ”»å‡»è®¡æ—¶å™¨
                                enemyMoveTimer = setInterval(moveEnemy, 5000); // æ¯5ç§’ç§»åŠ¨ä¸€æ¬¡
                                enemyAttackTimer = setInterval(enemyAttack, 2000); // æ¯2ç§’æ”»å‡»ä¸€æ¬¡
                            }
                        } else {
                            // ç”ŸæˆğŸˆšï¸
                            grid[player.y][player.x] = 'ğŸˆšï¸';
                        }
                    } else if (currentCell === 'ğŸŒ¹' || currentCell === 'ğŸŒ™' || currentCell === 'ğŸˆšï¸') {
                        // å¦‚æœå·²ç»æ˜¯ç‰©èµ„ï¼Œå†æ¬¡æŒ–æ˜å˜æˆğŸˆšï¸
                        grid[player.y][player.x] = 'ğŸˆšï¸';
                    }
                    
                    drawGrid();
                }
                
                // æ‹¾å–
                function pickup() {
                    if (!gameRunning2) return;
                    
                    // æ‹¾å–å½“å‰ä½ç½®çš„ğŸŒ¹
                    if (grid[player.y][player.x] === 'ğŸŒ¹') {
                        gold += 500;
                        // æ‹¾å–åè‡ªåŠ¨å˜æˆæ•°å­—
                        grid[player.y][player.x] = Math.floor(Math.random() * 9) + 1;
                        updateStats();
                        updateEscapeBtn();
                        drawGrid();
                    }
                }
                
                // æ•Œäººç§»åŠ¨
                function moveEnemy() {
                    if (!enemy || !gameRunning2) return;
                    
                    // ç®€å•çš„è¿½è¸ªAI
                    let dx = player.x - enemy.x;
                    let dy = player.y - enemy.y;
                    
                    if (Math.abs(dx) > Math.abs(dy)) {
                        // æ°´å¹³ç§»åŠ¨
                        enemy.x += dx > 0 ? 1 : -1;
                    } else {
                        // å‚ç›´ç§»åŠ¨
                        enemy.y += dy > 0 ? 1 : -1;
                    }
                    
                    // æ£€æŸ¥è¾¹ç•Œ
                    enemy.x = Math.max(0, Math.min(gridSize - 1, enemy.x));
                    enemy.y = Math.max(0, Math.min(gridSize - 1, enemy.y));
                    
                    drawGrid();
                }
                
                // æ•Œäººæ”»å‡»
                function enemyAttack() {
                    if (!enemy || !gameRunning2) return;
                    
                    playerHp -= 10;
                    if (playerHp <= 0) {
                        playerHp = 0;
                        gameOver('lose');
                    }
                    
                    updateStats();
                }
                
                // ç©å®¶æ”»å‡»æ•Œäºº
                function attackEnemy() {
                    if (!enemy || !gameRunning2) return;
                    
                    enemy.hp -= 20;
                    enemyHp = enemy.hp;
                    
                    if (enemy.hp <= 0) {
                        // æ•Œäººæ­»äº¡
                        enemy = null;
                        enemyHp = 0;
                        clearInterval(enemyAttackTimer);
                        clearInterval(enemyMoveTimer);
                    }
                    
                    updateStats();
                    drawGrid();
                }
                
                // åˆ·æ–°æ•°å­—
                function refreshNumbers() {
                    if (!gameRunning2) return;
                    
                    for (let y = 0; y < gridSize; y++) {
                        for (let x = 0; x < gridSize; x++) {
                            if (grid[y][x] === 'ï¿½ï¸' && !(x === player.x && y === player.y) && !(enemy && x === enemy.x && y === enemy.y)) {
                                // å°†ğŸˆšï¸åˆ·æ–°ä¸ºæ•°å­—
                                grid[y][x] = Math.floor(Math.random() * 9) + 1;
                            }
                        }
                    }
                    
                    drawGrid();
                }
                
                // æ’¤ç¦»æ¸¸æˆ
                function escapeGame() {
                    if (gameRunning2 && gold >= targetGold) {
                        gameOver('win');
                    }
                }
                
                // æ¸¸æˆç»“æŸ
                function gameOver(result) {
                    gameRunning2 = false;
                    clearInterval(refreshTimer);
                    clearInterval(enemyAttackTimer);
                    clearInterval(enemyMoveTimer);
                    
                    if (result === 'win') {
                        alert('çœ‹æ¥ä½ è¿˜æœ‰ç‚¹å®åŠ›ï¼ğŸ‰');
                    } else {
                        alert('å°å­ï¼Œèœå°±å¤šç»ƒï¼ğŸ’€');
                    }
                }
                
                // æ›´æ–°çŠ¶æ€
                function updateStats() {
                    playerHpElement.textContent = playerHp;
                    playerHpBar.style.width = (playerHp / 100) * 100 + '%';
                    enemyHpElement.textContent = enemyHp;
                    enemyHpBar.style.width = (enemyHp / 20) * 100 + '%';
                    goldElement.textContent = gold;
                }
                
                // æ›´æ–°æ’¤ç¦»æŒ‰é’®çŠ¶æ€
                function updateEscapeBtn() {
                    if (gold >= targetGold) {
                        escapeBtn.style.background = '#2ecc71';
                        escapeBtn.style.opacity = '1';
                        escapeBtn.style.pointerEvents = 'auto';
                    } else {
                        escapeBtn.style.background = '#e74c3c';
                        escapeBtn.style.opacity = '0.5';
                        escapeBtn.style.pointerEvents = 'none';
                    }
                }
                
                // åˆå§‹åŒ–æ¸¸æˆ
                initGrid();
            </script>
            
            <h2>ç‰¹åˆ«è¯´æ˜</h2>
            <p>çœ‹åˆ°ä¸Šé¢çš„æ¬¢è¿è¯­äº†å—ï¼Ÿé‚£æ˜¯ä¸“é—¨ä¸ºä½ å‡†å¤‡çš„ï¼ğŸ˜Š</p>
        </main>
        
        <footer>
            <p>&copy; æˆ‘çš„ç½‘ç«™.å°æ•ä¸“å±. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            <p>è”ç³»æ–¹å¼: <a href="contact.html" class="blinking-text">ç‚¹å‡»ç«‹é©¬è”ç³»æˆ‘</a></p>
            <p style="font-size: 0.9em; color: #666;">å°é¦‹çŒ«ä¸“å±ç½‘ç«™ ğŸ±</p>
        </footer>
    </div>
</body>
</html>
